---

title: Core

keywords: fastai
sidebar: home_sidebar

summary: "Core of this library: DataChunk, RecordMaster, Data_Pipe, and import/export of reM"
description: "Core of this library: DataChunk, RecordMaster, Data_Pipe, and import/export of reM"
---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: 00_core.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
        
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">%</span><span class="k">load_ext</span> autoreload
<span class="o">%</span><span class="k">autoreload</span> 2
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="DataChunk" class="doc_header"><code>class</code> <code>DataChunk</code><a href="https://github.com/Tom-TBT/theonerig/tree/master/theonerig/core.py#L15" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>DataChunk</code>(<strong><code>data</code></strong>, <strong><code>idx</code></strong>, <strong><code>group</code></strong>, <strong><code>fill</code></strong>=<em><code>0</code></em>) :: <code>ndarray</code></p>
</blockquote>
<p>Base brick of data. Derived from np.ndarray
params:</p>

<pre><code>- data: The ndarray with shape (time, ...)
- idx: Index of the start of the DataChunk in the record.
- group: group of the DataChunk in {stim, sync, cell, data}
- fill: Default filling value.</code></pre>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="ContiguousRecord" class="doc_header"><code>class</code> <code>ContiguousRecord</code><a href="https://github.com/Tom-TBT/theonerig/tree/master/theonerig/core.py#L60" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>ContiguousRecord</code>(<strong><code>length</code></strong>:<code>int</code>, <strong><code>signals</code></strong>:<a href="/theonerig/core#DataChunk"><code>DataChunk</code></a>, <strong><code>main_tp</code></strong>:<a href="/theonerig/core#DataChunk"><code>DataChunk</code></a>)</p>
</blockquote>
<p>Representation of a contiguous recording session to store DataChunk
of various sources under a single time reference. DataChunk are stored
under a name in one of the groups "sync","stim","data" and "cell".</p>
<p>A name can contain multiple DataChunk if those are not overlapping in time.</p>
<p>Each ContiguousRecord contains in the group "sync" two master DataChunk,
one for signals to be recorded across acquisition device to syncronize them,
one for timepoints of these signals for the main device and are called
respectively "signals" and "main_tp".</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="RecordMaster" class="doc_header"><code>class</code> <code>RecordMaster</code><a href="https://github.com/Tom-TBT/theonerig/tree/master/theonerig/core.py#L214" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>RecordMaster</code>(<strong><code>reference_data_list</code></strong>:<code>Sequence</code>[<code>Tuple</code>[<a href="/theonerig/core#DataChunk"><code>DataChunk</code></a>, <a href="/theonerig/core#DataChunk"><code>DataChunk</code></a>]], <strong><code>frame_rate</code></strong>=<em><code>60</code></em>) :: <code>list</code></p>
</blockquote>
<p>The RecordMaster class is the top level object managing all
timeseries. It uses a list of ContiguousRecord to represent
possible discontinuted data records.</p>
<p>The main aim of the RecordMaster is to store the various data
stream of an experiment under a unique time reference, to ease
the processing of the data.</p>
<p>A RecordMaster is created by providing to it a list of (timepoints, signals) arrays of
identical lenght. This serves as reference to align other DataChunks with the signals
at the given timepoints. Multiple tuples represent uncontiguous sequences of data in
a same record. The timepoints must be evenly spaced (regular).</p>
<p>params:</p>

<pre><code>- reference_data_list: list of (timepoints, signals) arrays.
- frame_rate: Frame rate in Hz</code></pre>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="Data_Pipe" class="doc_header"><code>class</code> <code>Data_Pipe</code><a href="https://github.com/Tom-TBT/theonerig/tree/master/theonerig/core.py#L344" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>Data_Pipe</code>(<strong><code>record_master</code></strong>:<a href="/theonerig/core#RecordMaster"><code>RecordMaster</code></a>, <strong><code>data_names</code></strong>:<code>Union</code>[<code>str</code>, <code>list</code>], <strong><code>target_names</code></strong>:<code>Union</code>[<code>str</code>, <code>list</code>]=<em><code>None</code></em>)</p>
</blockquote>
<p>A Data_Pipe is used to query data from a RecordMaster. By adding/substracting portions
of the record using DataChunk names, it creates a mask over which specified DataChunks
are retrivied as a dictionary from the Data_Pipe.</p>
<p>params:</p>

<pre><code>- record_master: the RecordMaster from which to retrieve data
- data_names: Name, or list of names of the DataChunk to retrieve once the masking process is done.
- target_names: Alias, or list of alias to give to the DataChunk in the retrieved dictionnary.</code></pre>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="export_record" class="doc_header"><code>export_record</code><a href="https://github.com/Tom-TBT/theonerig/tree/master/theonerig/core.py#L529" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>export_record</code>(<strong><code>path</code></strong>, <strong><code>record_master</code></strong>)</p>
</blockquote>
<p>Export a Record_Master object to an h5 file, readable outside of this library.</p>
<p>params:
    path: path of the file to be saved
    record_master: RecordMaster to save</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="import_record" class="doc_header"><code>import_record</code><a href="https://github.com/Tom-TBT/theonerig/tree/master/theonerig/core.py#L558" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>import_record</code>(<strong><code>path</code></strong>)</p>
</blockquote>
<p>Import a Record_Master from an h5 file saved by the export_record function of this library.</p>
<p>params:
    path: path of the RecordMaster to import</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

</div>
 

